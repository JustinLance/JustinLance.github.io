<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Step by step with Geek."><title>网络编程之TCP/IP网络参考模型概览 | 放手一搏</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/5.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">网络编程之TCP/IP网络参考模型概览</h1><a id="logo" href="/.">放手一搏</a><p class="description">Step by step with Geek！</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">网络编程之TCP/IP网络参考模型概览</h1><div class="post-meta">Nov 9, 2016<span> | </span><span class="category"><a href="/categories/网络编程/">网络编程</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#前言"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#TCP-IP模型简述及层次划分"><span class="toc-number">2.</span> <span class="toc-text">TCP/IP模型简述及层次划分</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#应用层"><span class="toc-number">2.1.</span> <span class="toc-text">应用层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP"><span class="toc-number">2.1.1.</span> <span class="toc-text">HTTP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FTP"><span class="toc-number">2.1.2.</span> <span class="toc-text">FTP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Telnet"><span class="toc-number">2.1.3.</span> <span class="toc-text">Telnet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SMTP"><span class="toc-number">2.1.4.</span> <span class="toc-text">SMTP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SNMP"><span class="toc-number">2.1.5.</span> <span class="toc-text">SNMP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#传输层"><span class="toc-number">2.2.</span> <span class="toc-text">传输层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP"><span class="toc-number">2.2.1.</span> <span class="toc-text">TCP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UDP"><span class="toc-number">2.2.2.</span> <span class="toc-text">UDP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#网络互连层"><span class="toc-number">2.3.</span> <span class="toc-text">网络互连层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#IP"><span class="toc-number">2.3.1.</span> <span class="toc-text">IP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ICMP"><span class="toc-number">2.3.2.</span> <span class="toc-text">ICMP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IGMP"><span class="toc-number">2.3.3.</span> <span class="toc-text">IGMP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据链路层"><span class="toc-number">2.4.</span> <span class="toc-text">数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ARP、RARP"><span class="toc-number">2.4.1.</span> <span class="toc-text">ARP、RARP</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#数据的封装"><span class="toc-number">3.</span> <span class="toc-text">数据的封装</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#数据的分用"><span class="toc-number">4.</span> <span class="toc-text">数据的分用</span></a></li></ol></div></div><div class="post-content"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><strong>该篇仅供个人学习及备忘总结之用途，内容多取自于网络及《TCP/IP详解卷1：协议》一书</strong><br><a id="more"></a></p>
<h1 id="TCP-IP模型简述及层次划分"><a href="#TCP-IP模型简述及层次划分" class="headerlink" title="TCP/IP模型简述及层次划分"></a>TCP/IP模型简述及层次划分</h1><p>由国际标准化组织（ISO）制定的网络参考模型 OSI（Open System Interconnection） ,它定义了网络协议的基本框架，并制定了七层标准模型，分别是应用层，表示层，会话层，传输层，网络层，数据链路层以及物理层。但由于OSI参考模型还是显得有些复杂，于是简化版的 TCP/IP参考模型应运而生了。具体看下图：<br><img src="http://oh4dn5mxd.bkt.clouddn.com/%E7%BD%91%E7%BB%9C%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B%E5%9B%BE.png" alt="图1-网络参考模型示意图"></p>
<p>TCP/IP参考模型(又称TCP/IP协议族)是一组不同的协议组合在一起构成的协议族。尽管通常称该协议族为TCP/IP，但TCP和IP只是其中的两种协议而已,它不仅具有TCP传输协议，也有UDP协议。</p>
<p>TCP/IP参考模型分为应用层，传输层，网络互联层以及数据链路层，每层都具有相应的协议。协议指的是通信双方之间进行数据传输的规则或者格式。</p>
<p><img src="http://oh4dn5mxd.bkt.clouddn.com/TCP_IP%E5%8D%8F%E8%AE%AE%E6%97%8F%E4%B8%AD%E4%B8%8D%E5%90%8C%E5%B1%82%E6%AC%A1%E7%9A%84%E5%8D%8F%E8%AE%AE%E5%88%92%E5%88%86.png" alt="图2-TCP/IP协议族中不同层次的协议"></p>
<h2 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h2><p>TCP/IP模型将OSI参考模型中的会话层和表示层的功能合并到应用层实现。应用层负责处理特定的应用程序细节，针对不同的网络应用引入并实现了不同的应用层协议。</p>
<p>应用层协议(application layer protocol)定义了运行在不同端系统上的应用程序进程如何相互传递报文。</p>
<p>该层协议既有基于TCP协议的，也有基于UDP协议的，常用的有 HTTP,FTP,Telnet,SMTP，POP3，SNMP等。</p>
<h3 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h3><p>HTTP(Hyper Text Transfer Protocol)：超文本传输协议。它是基于TCP协议作为运输支撑，</p>
<h3 id="FTP"><a href="#FTP" class="headerlink" title="FTP"></a>FTP</h3><p>FTP（File Transfer Protocol）：文件传输协议</p>
<h3 id="Telnet"><a href="#Telnet" class="headerlink" title="Telnet"></a>Telnet</h3><h3 id="SMTP"><a href="#SMTP" class="headerlink" title="SMTP"></a>SMTP</h3><p>简单邮件传送协议。</p>
<h3 id="SNMP"><a href="#SNMP" class="headerlink" title="SNMP"></a>SNMP</h3><p>简单网络管理协议。使用了UDP协议</p>
<h2 id="传输层"><a href="#传输层" class="headerlink" title="传输层"></a>传输层</h2><p>传输层主要为两台主机上的应用程序提供端到端的通信。TCP和UDP都采用IP作为网络层协议。</p>
<h3 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h3><p>TCP（Tranfer Control Protocol）：传输控制协议，它为两台主机提供了可靠的，面向连接的数据通信。</p>
<p>为了提供这种可靠的服务，TCP采用了超时重传、发送和接收端到端的确认分组等机制，所以TCP能在不可靠的IP层上提供了一个可靠的运输层。由于运输层提供了高可靠性的端对端通信，因此应用层可以忽略所有这些细节。</p>
<p>TCP有以下特点：</p>
<ul>
<li>面向连接(三次握手)</li>
<li>在IP环境下提供数据传输可靠性</li>
<li>速度慢</li>
</ul>
<h3 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h3><p>UDP(User Datagram Protocol)：用户数据报协议。</p>
<p>UDP为应用程序发送和接收数据报。一个数据报是指从发送方传输到接收方的一个信息单元（例如，发送方指定的一定字节数的信息）。但是与TCP不同的是，UDP是不可靠的，它不能保证数据报能安全无误地到达最终目的。任何必须的可靠性都必须由应用层来提供。</p>
<p>UDP有以下特点：</p>
<ul>
<li>面向无连接</li>
<li>数据传输不保证可靠性</li>
<li>有64k的数据报包大小限制</li>
<li>速度快</li>
</ul>
<h2 id="网络互连层"><a href="#网络互连层" class="headerlink" title="网络互连层"></a>网络互连层</h2><h3 id="IP"><a href="#IP" class="headerlink" title="IP"></a>IP</h3><p>IP协议是网络层上的主要协议，它提供的是一种不可靠的服务。也就是说，它只是尽可能快地把分组从源结点送到目的结点，但是并不提供任何可靠性保证。</p>
<h3 id="ICMP"><a href="#ICMP" class="headerlink" title="ICMP"></a>ICMP</h3><p>ICMP是IP协议的附属协议。IP层用它来与其他主机或路由器交换错误报文和其他重要信息。</p>
<h3 id="IGMP"><a href="#IGMP" class="headerlink" title="IGMP"></a>IGMP</h3><p>IGMP是Internet组管理协议。它用来把一个UDP数据报多播到多个主机。</p>
<h2 id="数据链路层"><a href="#数据链路层" class="headerlink" title="数据链路层"></a>数据链路层</h2><h3 id="ARP、RARP"><a href="#ARP、RARP" class="headerlink" title="ARP、RARP"></a>ARP、RARP</h3><p>ARP（地址解析协议）和RARP（逆地址解析协议）是某些网络接口（如以太网和令牌环网）使用的特殊协议，用来转换IP层和网络接口层使用的地址。</p>
<h1 id="数据的封装"><a href="#数据的封装" class="headerlink" title="数据的封装"></a>数据的封装</h1><p>当应用程序用TCP传送数据时，数据被送入协议栈中，然后逐个通过每一层直到被当作一串比特流送入网络。其中每一层对收到的数据都要增加一些首部信息（有时还要增加尾部信息）。</p>
<p>TCP传给IP的数据单元称作<code>TCP报文段</code>或简称为<code>TCP段</code>（TCP segment）。</p>
<p>IP传给网络接口层的数据单元称作<code>IP数据报</code>(IP datagram)。</p>
<p>通过以太网传输的比特流称作<code>帧</code>(Frame)。</p>
<p><img src="http://oh4dn5mxd.bkt.clouddn.com/TCP-IP%E5%8D%8F%E8%AE%AE%E6%A0%88%E5%B0%81%E8%A3%85%E6%95%B0%E6%8D%AE%E8%BF%87%E7%A8%8B.png" alt="图3-TCP/IP协议栈封装数据过程"></p>
<ul>
<li><p>UDP数据与TCP数据基本一致。唯一的不同是UDP传给IP的信息单元称作<code>UDP数据报</code>（UDP datagram），而且UDP的首部信息长为8字节。</p>
</li>
<li><p>运输层协议在生成报文首部时要存入一个应用程序的标识符。TCP和UDP都用一个 <code>16 bit</code> 的端口号来表示不同的应用程序。TCP和UDP把源端口号和目的端口号分别存入报文首部中。</p>
</li>
<li><p>由图2-TCP/IP协议族中不同层次的协议可以看到，<code>TCP</code>、<code>UDP</code>、<code>ICMP</code>和<code>IGMP</code>都要向<code>IP</code>传送数据，因此<code>IP</code>必须在生成的IP首部中加入某种标识，以表明数据属于哪一层。为此， IP在首部中存入一个长度为<code>8 bit</code>的数值，称作协议域。</p>
<ul>
<li>1  表示为ICMP协议</li>
<li>2  表示为IGMP协议</li>
<li>6  表示为TCP协议</li>
<li>17 表示为UDP协议</li>
</ul>
</li>
<li><p>网络接口分别要发送和接收I P、A R P和R A R P数据，因此也必须在以太网的帧首部中加入某种形式的标识，以指明生成数据的网络层协议。为此，以太网的帧首部也有一个<code>16 bit</code>的帧类型域。</p>
</li>
</ul>
<p>下图为最终封装后的一帧以太网数据包格式示意图：</p>
<p><img src="http://oh4dn5mxd.bkt.clouddn.com/%E4%B8%80%E5%B8%A7%E4%BB%A5%E5%A4%AA%E7%BD%91%E6%95%B0%E6%8D%AE%E5%8C%85%E6%A0%BC%E5%BC%8F%E7%A4%BA%E6%84%8F%E5%9B%BE.png" alt="图4-一帧以太网数据包格式示意图"></p>
<h1 id="数据的分用"><a href="#数据的分用" class="headerlink" title="数据的分用"></a>数据的分用</h1><p>当当目的主机收到一个以太网数据帧时，数据就开始从协议栈中由底向上升，同时去掉各层协议加上的报文首部。每层协议盒都要去检查报文首部中的协议标识，以确定接收数据的上层协议。这个过程称作分用（Demultiplexing），简单来理解就是数据包的拆解。</p>
<p><img src="http://oh4dn5mxd.bkt.clouddn.com/%E4%BB%A5%E5%A4%AA%E7%BD%91%E6%95%B0%E6%8D%AE%E5%B8%A7%E7%9A%84%E5%88%86%E7%94%A8%E8%BF%87%E7%A8%8B.png" alt="图5-以太网数据帧的分用过程"></p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://www.code1024.win/2016/11/09/网络编程之TCP-IP网络参考模型概览/" data-id="ciw4216660007rw7p1xrmzro7" class="article-share-link">分享到</a><div class="tags"><a href="/tags/网络编程/">网络编程</a><a href="/tags/TCP-IP/">TCP/IP</a></div><div class="post-nav"><a href="/2016/11/18/去掉应用标题栏/" class="pre">去掉应用标题栏</a><a href="/2016/11/03/MarkDown语法/" class="next">MarkDown 语法</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://www.code1024.win"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/博客搭建/">博客搭建</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/开源项目/">开源项目</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/网络编程/">网络编程</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/博客框架/" style="font-size: 15px;">博客框架</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/博客搭建/" style="font-size: 15px;">博客搭建</a> <a href="/tags/Hexo，Github-Pages/" style="font-size: 15px;">Hexo，Github Pages</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/技巧，标题栏/" style="font-size: 15px;">技巧，标题栏</a> <a href="/tags/网络编程/" style="font-size: 15px;">网络编程</a> <a href="/tags/TCP-IP/" style="font-size: 15px;">TCP/IP</a> <a href="/tags/开源项目/" style="font-size: 15px;">开源项目</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/11/28/网络编程之HTTP协议/">网络编程之HTTP协议</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/28/个人收集的开源项目汇总/">个人收集的开源项目汇总</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/18/去掉应用标题栏/">去掉应用标题栏</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/09/网络编程之TCP-IP网络参考模型概览/">网络编程之TCP/IP网络参考模型概览</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/03/MarkDown语法/">MarkDown 语法</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/03/Hexo篇/">Hexo篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/03/个人博客搭建/">个人博客搭建(Github Pages(或虚拟主机)+Hexo+个人域名)</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://gold.xitu.io/" title="稀土掘金" target="_blank">稀土掘金</a><ul></ul><a href="http://www.androidblog.cn/" title="Android Blog 周刊" target="_blank">Android Blog 周刊</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">放手一搏.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>